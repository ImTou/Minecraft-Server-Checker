<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Whois Lookup</title>
  </head>
  <body>
    <h1>Whois Lookup</h1>
    <form onsubmit="event.preventDefault(); lookup();">
      <label for="query">Domain/IP:</label>
      <input type="text" id="query" name="query" placeholder="example.com or 8.8.8.8">
      <button type="submit">Lookup</button>
    </form>
    <div id="loading" style="display: none;">
      <img src="https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif" alt="loading">
    </div>
    <div id="result"></div>
    <script>
      function whoisLookup() {
  const query = document.getElementById("whois-input").value.trim();
  const url = `https://ipwhois.io/json/${query}?apiKey=${WHOIS_API_KEY}`;
  
  fetch(url)
    .then(response => {
      if (!response.ok) {
        throw new Error("Network response was not ok");
      }
      return response.json();
    })
    .then(data => {
      console.log(data);
      if (data.success) {
        displayWhoisResults(data);
      } else {
        displayWhoisError(data.message);
      }
    })
    .catch(error => {
      console.error("There was a problem with the Whois request:", error);
      displayWhoisError("There was a problem with the Whois request. Please try again later.");
    });
}
      function displayWhoisResults(data) {
  const resultsContainer = document.getElementById("whois-results");
  resultsContainer.innerHTML = "";
  
  const domainContainer = document.createElement("div");
  domainContainer.innerHTML = `<h3>${data.ip}</h3>`;
  resultsContainer.appendChild(domainContainer);
  
  const table = document.createElement("table");
  const tbody = document.createElement("tbody");
  
  const fields = [
    { label: "Organization", value: data.organization },
    { label: "ISP", value: data.isp },
    { label: "ASN", value: data.asn },
    { label: "Country", value: data.country },
    { label: "Region", value: data.region },
    { label: "City", value: data.city },
    { label: "Latitude", value: data.latitude },
    { label: "Longitude", value: data.longitude },
    { label: "Timezone", value: data.timezone },
    { label: "Postal Code", value: data.postal },
    { label: "Currency", value: data.currency },
  ];
  
  fields.forEach(field => {
    if (field.value) {
      const row = document.createElement("tr");
      const labelCell = document.createElement("td");
      labelCell.textContent = field.label;
      const valueCell = document.createElement("td");
      valueCell.textContent = field.value;
      row.appendChild(labelCell);
      row.appendChild(valueCell);
      tbody.appendChild(row);
    }
  });
  
  table.appendChild(tbody);
  resultsContainer.appendChild(table);
}
    </script>
  </body>
</html>
